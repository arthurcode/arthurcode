{% extends "base.html" %}

{% block site_wrapper %}
    {% comment %} YUI 750px fixed width layout {% endcomment %}
    <div id="doc" class="yui-t4">
        <div id="hd">
            {% block banner %}
                <span class="sitename">arthurcode</span>
            {% endblock %}

            {% block navigation %}
                <ul id="primary-navigation">
                    <li class="blog"><a href="{% url index %}">Blog</a></li>
                    <li class="about"><a href="{% url about %}">About Me</a></li>
                    <li class="contact"><a href="{% url contact %}">Contact</a></li>
                </ul>
            {% endblock %}

            <a class="rss" href="{% url feeds %}"><img src="{{ STATIC_URL }}icons/rss_64x64.png" alt="subscribe to my rss or atom feed" title="Subscribe to my rss or atom feed"></a>
        </div>
        <div id="bd">
            <div id="yui-main">
                <div class="yui-b">
                    {% block content %}{% endblock %}
                </div>
            </div>
            <div class="yui-b">
                {% block sidebar %}
                    <ul>
                        <li><a href="http://www.djangoproject.com/"><img src="https://www.djangoproject.com/m/img/badges/djangopowered126x54_grey.gif" border="0" alt="Powered by Django." title="Powered by Django." /></a></li>
                        {% url archive as archive_url%}
                        <li><a href="{{ archive_url }}">archive</a></li>
                    </ul>
                    {% block related_content %}{% endblock %}
                {% endblock %}
            </div>
        </div>
        <div id="ft">
            {% block footer %}
                copyright &copy 2013 www.arthurcode.com
                {% if user.is_staff %}<a href="{% url admin:index %}">admin</a>{% endif %}
            {% endblock %}
        </div>
    </div>
{% endblock %}

{% block javascript %}
    {{ block.super }}
    <script type="text/javascript">
        YUI().use('node', function(Y) {
            // comment forms - make the 'email' field required when the 'email_on_reply' box is checked
            Y.delegate('click', function(e) {
                var form = e.currentTarget.ancestor('form');
                // how to get the current value of a check-box?

                var email_field = form.one('input#id_email').ancestor('div.field');
                if (email_field != null) {
                    var label = email_field.one('label');
                    var input = email_field.one('input');
                    // replace optional-text with required-text
                    var optional_text = label.one('span.optional-text');
                    var required_text = label.one('span.required-text');

                    if (optional_text != null) {
                        optional_text.replace("<span class='required-text'>(required)</span>");
                        input.setAttribute("aria-required", "true");
                        input.setAttribute("required", "");
                    } else if (required_text != null) {
                        required_text.replace("<span class='optional-text'>(optional)</span>");
                        input.removeAttribute("aria-required");
                        input.removeAttribute("required");
                    }
                }

                //form.toggleClass('hidden');
            }, document, 'form.comment input#id_email_on_reply');
        });
    </script>
{% endblock %}