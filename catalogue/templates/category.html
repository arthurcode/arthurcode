{% extends "base_site.html" %}

{% block title %}{% if category %}{{ category.name }}{% else %}All Products{% endif %}{% endblock %}

{% block body_class %}products{% endblock %}

{% block body %}

    <div class="breadcrumbs">
        {% if category %}
            <a href="{% url catalogue_category ''%}">All Products</a> >
        {% else %}
            All Products
        {% endif %}
        {% if parent_categories %}
            {% for category in parent_categories %}
                <a href="{% url catalogue_category category.slug %}">{{ category.name }}</a> >
            {% endfor %}
        {% endif %}
        {{ category.name }}
    </div>


    <div>
    {% if child_categories %}
        {% if category %}
            <h2>Sub Categories</h2>
        {% else %}
            <h2>Categories</h2>
        {% endif %}
        <ul>
            {% for category in child_categories %}
                <li><a href="{% url catalogue_category category.slug %}">{{ category.name }} ({{ category.product_count }})</a></li>
            {% endfor %}
        </ul>
    {% endif %}
    </div>

    <div>
        {% if category %}
            <h1>All {{ category.name }}</h1>
        {% else %}
            <h1>All Products</h1>
        {% endif %}

        {% with products as objects %}{% include "_pagination.html" %}{% endwith %}
        {% for product in products %}
            {% include "_thumbnail.html" %}
        {% endfor %}
        {% with products as objects %}{% include "_pagination.html" %}{% endwith %}
    </div>
{% endblock %}
